

--- Что нужно проверить в плагине перед публикацией? ---

Данный документ содержит рекомендации для проверки плагинов перед тем, как выпустить их в продакшн.


1. Меры безопасности


1.1. Закрыть доступ полностью

В каталогах: classes, config, include, templates/language

должны быть добавлены файлы .htaccess, которые закрывают ко всем файлам доступ извне к текущему каталогу и всем дочерним. Пример файла ".htaccess":

Order Deny,Allow
Deny from all


1.2. Закрыть доступ к файлам шаблона

В каталоге: templates

должен быть добавлен файлы .htaccess, которые закрывают доступ извне к текущему каталогу и всем дочерним для типа файлов "tpl", которые являются шаблонами. Пример файла ".htaccess":

Options -Indexes
<Files ~ "\.tpl$">
    Order allow,deny
    Deny from all
</Files>


1.3. Дампы таблиц

Дампы ваших таблиц должны храниться в папке sql_dumps плагина, которая полностью должна быть закрыта для доступа извне файлом .htaccess. Пример файла ".htaccess":

Order Deny,Allow
Deny from all


1.4. Главный класс плагина

В главном классе плагина, который находится в корне папки плагина (PluginИмяплагина.class.php) должна существовать проверка на существование класса Plugin:

if (!class_exists('Plugin')) {
	die('');
}

Это позволит избежать раскрытия директории на сервере при прямом обращении к имени файла.
